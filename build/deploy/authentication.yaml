apiVersion: apps/v1
kind: Deployment
metadata:
  name: authentication
  labels:
    app: igru
    service: authentication
spec:
  selector:
    matchLabels:
      app: igru
      service: authentication
  template:
    metadata:
      labels:
        app: igru
        service: authentication
    spec:
      containers:
      - image: authentication:latest
        name: authentication
        env:
        - name: DATABASE.HOST
          value: cockroachdb.default.svc
        - name: DATABASE.USERNAME
          value: root
        - name: DATABASE.DATABASE
          value: authentication
        - name: DATABASE.PORT
          value: "26257"
        imagePullPolicy: IfNotPresent
        ports:
        - containerPort: 80
          name: grpc
